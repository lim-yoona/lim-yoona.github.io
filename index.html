<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>月梦の技术博客 - 博学而笃志，切问而近思</title><meta name="author" content="月梦"><meta name="copyright" content="月梦"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="月梦の技术博客">
<meta property="og:url" content="https://ymiir.top/index.html">
<meta property="og:site_name" content="月梦の技术博客">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ymiirtop-tc.oss-cn-beijing.aliyuncs.com/202408041627853.jpg">
<meta property="article:author" content="月梦">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ymiirtop-tc.oss-cn-beijing.aliyuncs.com/202408041627853.jpg"><link rel="shortcut icon" href="https://ymiirtop-tc.oss-cn-beijing.aliyuncs.com/202408041627853.jpg"><link rel="canonical" href="https://ymiir.top/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '月梦の技术博客',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-10-06 15:54:04'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://ymiirtop-tc.oss-cn-beijing.aliyuncs.com/202408041627853.jpg" onerror="onerror=null;src='https://ymiirtop-tc.oss-cn-beijing.aliyuncs.com/202408082315133.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://ymiirtop-tc.oss-cn-beijing.aliyuncs.com/202408041626689.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="月梦の技术博客"><span class="site-name">月梦の技术博客</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">月梦の技术博客</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/lim-yoona" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:ymiirtop@sina.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2024/05/02/2024-05-02-ymdb/" title="ymdb-一个分布式键值存储系统"><img class="post-bg" src="https://s11.ax1x.com/2024/02/17/pFJnTYQ.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ymdb-一个分布式键值存储系统"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/05/02/2024-05-02-ymdb/" title="ymdb-一个分布式键值存储系统">ymdb-一个分布式键值存储系统</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-05-02T11:50:00.000Z" title="发表于 2024-05-02 19:50:00">2024-05-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%BC%80%E6%BA%90/">开源</a></span></div><div class="content">ymdb 是我开源的一款简易的分布式键值存储系统，适用于分布式系统初学者练手或者应届生写上简历，这篇文章将对 ymdb 做一个全面的介绍（建议仅用作学习用途，应用于生产是危险的，因为 ymdb 尚不完善）。  
ymdb 使用 Go 语言开发，从面试情况来看，面试官还是很喜欢问这个项目的，并且有几个面试官表示这样的项目比较抓眼球，因为它是一个偏底层的并且不是一个千篇一律（俗称“烂大街”）的项目，因此写在简历上不失为一个好的选择。  
技术选型要做一个分布式存储系统，需要考虑以下三个点：  

存储  
分区  
复制

存储是设计一个存储系统必须要考虑的，而分区和复制则是设计一个分布式系统需要考虑的。  
在存储部分，当前的键值存储有三种技术方案，一种是 RocksDB 采用的 LSMT(Log Structured Merge Tree) 方案；一种是 RoseDB 采用的 Bitcask 方案；一种是 Redis 的方案。考虑到我想做一个持久的键值存储系统，所以 Redis 这种基于内存的方式首先排除，Redis 的持久化仅用作备份以及主从复制，并不会从磁盘去拿数据。LSMT 实现 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/04/28/2024-04-28-ReentrantLock/" title="Java ReentrantLock原理"><img class="post-bg" src="https://z1.ax1x.com/2023/12/01/pisYxbD.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java ReentrantLock原理"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/04/28/2024-04-28-ReentrantLock/" title="Java ReentrantLock原理">Java ReentrantLock原理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-04-28T11:50:00.000Z" title="发表于 2024-04-28 19:50:00">2024-04-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a></span></div><div class="content">ReentrantLock 是 Java JUC(java.util.concurrent) 包下的一个锁工具，它实现了 Lock 接口，与 synchronized 锁不同， ReentrantLock 除了用来做线程间互斥之外，还提供了很多高级的特性，例如公平锁 &amp; 非公平锁以及可中断。  
本文将从 JDK17 源码角度介绍一下 ReentrantLock 的底层实现原理，这部分是 Java 面试的常考知识点。（目前看到的博客都是基于 JDK8 源码分析的，而鲜有基于 JDK17 源码进行分析的）  
2024美团暑期实习后端开发一面：公平锁与非公平锁是如何实现的？ 看完这篇文章你就明白了！
AQSAQS 的全称为 AbstractQueueSynchronizer ，即抽象队列同步器，通俗来讲，AQS 的作用就是来定义线程如何获得锁、线程未获得锁如何等待以及线程如何释放锁。 ReentrantLock 的底层实现是高度依赖 AQS 的，这一点从源码中就可以看得出来：
public class ReentrantLock implements Lock, java.io. ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/03/25/2024-03-25-Topological-Sorting/" title="拓扑排序"><img class="post-bg" src="https://z1.ax1x.com/2023/12/01/pisYxbD.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="拓扑排序"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/03/25/2024-03-25-Topological-Sorting/" title="拓扑排序">拓扑排序</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-03-25T11:50:00.000Z" title="发表于 2024-03-25 19:50:00">2024-03-25</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AE%97%E6%B3%95/">算法</a></span></div><div class="content">拓扑排序（Topological Sorting）是一种针对有向无环图（DAG）的排序算法。在拓扑排序中，图中的顶点被安排成一个线性序列，使得如果图中存在一条从顶点 u 到顶点 v 的有向边，则在序列中顶点 u 出现在顶点 v 之前。  
拓扑排序通常用于描述一组任务或事件之间的依赖关系，其中每个任务都有一些前置任务，必须在它们完成后才能执行。通过拓扑排序，我们可以确定一种合理的执行顺序，以确保所有任务都按照其依赖关系得到正确执行。  
在实现上，拓扑排序可以根据下面的步骤实现：  

找到入度为 0 的顶点，把这些节点加入到排序结果中，这些节点没有前置任务  
将已经加入到排序结果中的节点及其相连的边删去，更改图中其他节点的入度  
重复 1，2 步，直到图中没有入度为 0 的节点

如果被拓扑排序的图是一个有向无环图，那么所有顶点都会被排序；而如果图中有环，则拓扑排序只会得到一部分的节点序列。  
因此，拓扑排序也常被用来检测一个图中是否有环。  
下面是拓扑排序入门的一个经典案例及其代码实现（ 2024春招字节跳动暑期实习一面代码题 ）：

题目描述: 一共有 n 门课你可以选， ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/03/09/2024-03-10-Spring-understanding&amp;summary/" title="Spring框架的理解与总结"><img class="post-bg" src="https://z1.ax1x.com/2023/12/01/pisYxbD.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring框架的理解与总结"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/03/09/2024-03-10-Spring-understanding&amp;summary/" title="Spring框架的理解与总结">Spring框架的理解与总结</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-03-09T11:50:00.000Z" title="发表于 2024-03-09 19:50:00">2024-03-09</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a></span></div><div class="content">Spring 是 Java 生态中一个举足轻重的框架，大大简化了开发，它的主要核心特性包括两个，分别是 控制反转 以及 依赖注入。  
控制反转Inversion of control ，简写为 IoC ，译为 控制反转，是一种设计思想，它将对象的 创建 和 管理 交给了 Spring 来管理，更具体地说，是交给了 IoC 容器来管理。  
IoC 容器是控制反转的一个实现，它存放着开发者交给 Spring 管理的对象，其底层是一个 Map。
IoC 的好处是可以帮我们管理对象间的依赖关系，隐藏了对象的创建逻辑，当我们需要一个对象实例时直接去问 Spring 要就行了。这样降低了依赖，减小了耦合。比方说 A 类中依赖了 B 类，如果没有 控制反转 ， A 类需要自己去在代码中创建对象 B 的实例，倘若对象 B 的构造函数或者说具体实现在之后有改变，那么所有依赖了 B 类的地方代码都需要重新改，依赖关系比较简单还好，如果依赖关系错综复杂，那简直无处下手。  
常常与 控制反转 一起出现的一个概念叫做 依赖注入 ，即 Dependency Injection ，简称 DI 。 依赖注入 指 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/02/13/2024-02-13-Raft-Algo-Summary/" title="Raft 共识算法总结"><img class="post-bg" src="https://z1.ax1x.com/2023/12/01/pisYxbD.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Raft 共识算法总结"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/02/13/2024-02-13-Raft-Algo-Summary/" title="Raft 共识算法总结">Raft 共识算法总结</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-02-13T11:50:00.000Z" title="发表于 2024-02-13 19:50:00">2024-02-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a></span></div><div class="content">Raft 算法是目前应用广泛的分布式共识算法，在许多知名的开源项目比如 etcd 中，都有 Raft 的身影。同时，随着 MIT6.824 课程的普及，_Raft_ 俨然成为了最广为人知的分布式共识算法。  
Raft 的设计动机之一就是为解决 Paxos 算法的难以理解性，因此 Raft 的一个大的特性就是易于理解。  
直接啃论文是困难的，本文旨在以简洁的文字总结 Raft 算法，让第一次认识 Raft 算法的同学也可以很快有一个整体上的理解。  

Raft is a consensus algorithm for managing a replicated log.

上面这句话引自 Raft 论文，即 Raft 是一个用于管理复制式日志的共识算法。  
这里有两个问题，什么是复制式日志？什么是共识？

复制式日志（ replicated log ）  
与复制式日志紧密相关的一个概念是 复制式状态机（ Replicated state machines ）  
复制式状态机 用于解决分布式系统中的 容错（ fault tolerance ） 问题，通常采用 复制式日志 实现， ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/02/12/2024-02-12-GFS-/" title="The Google File System"><img class="post-bg" src="https://s1.ax1x.com/2023/09/04/pPDvG4I.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="The Google File System"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/02/12/2024-02-12-GFS-/" title="The Google File System">The Google File System</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-02-12T11:50:00.000Z" title="发表于 2024-02-12 19:50:00">2024-02-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a></span></div><div class="content">今天看了The Google File System的论文， 我们简称其为GFS。 GFS是谷歌的分布式文件存储系统， 这篇论文是现代分布式软件系统入门的经典论文， 并由此诞生了Hadoop生态中HDFS的开源实现。   
我不会一字一句地翻译这篇论文， 因为我并不是想实现这样一个系统， 我打算将一些关键点提炼出来以供学习。   
介绍
GFS shares many of the same goals  as previous distributed file systems such as performance,  scalability, reliability, and availability.

GFS与之前的分布式文件系统有着许多共同的目标， 比如性能、可扩展性、可靠性和可用性。   
但是， Google在实践中提出了与早期分布式文件系统不同的设计。   
首先， 组件失效是常态而不是例外。 因此， 持续监控(constant monitoring)、错误检测(error detection)、容错( faulttolerance)和自动恢复(automatic re ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/12/07/2023-12-07-IO%E5%8E%9F%E7%90%86/" title="IO及IO模型"><img class="post-bg" src="https://z1.ax1x.com/2023/12/01/pisYxbD.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="IO及IO模型"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/12/07/2023-12-07-IO%E5%8E%9F%E7%90%86/" title="IO及IO模型">IO及IO模型</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-12-07T11:50:00.000Z" title="发表于 2023-12-07 19:50:00">2023-12-07</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%AB%98%E5%B9%B6%E5%8F%91/">高并发</a></span></div><div class="content">IO，即Input/Output，指的是程序从外部设备或者网络读取数据到用户态内存&#x2F;从用户态内存写数据到外部设备或者网络的过程。  
普通的IO过程一般的IO，其流程为，  

Java进程调用read() write()系统调用函数，进入内核态；  
内核中的相关程序将数据从设备缓冲区拷贝到内核缓冲区中；  
把数据从内核缓冲区拷贝到进程的地址空间中去

这就完成了一次Input，Output反之。  
以磁盘IO为例，一次普通IO的流程如下：   
这里有两个耗时的操作，一是从设备拷贝数据到内核缓冲区（磁盘准备数据慢，这里的设备缓冲区就是磁盘控制器的缓冲区，内核缓冲区就是PageCache），二是从内核缓冲区拷贝数据到进程的用户态内存空间（涉及到内核态到用户态CPU上下文的切换）。  
内核缓冲区的作用是解决第二个问题，一次性拷贝一批数据，从而避免频繁且缓慢的磁盘IO或者与其他设备的IO。  
字节缓冲流诸如BufferedInputStream作用是解决第一个问题，一次性从内核缓冲区拷贝一批数据到进程的缓冲区中，这个缓冲区位于进程的地址空间，之后接着取数据，如果缓冲区中 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/12/07/2023-12-10-RPC/" title="RPC协议介绍"><img class="post-bg" src="https://z1.ax1x.com/2023/12/01/pisYxbD.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RPC协议介绍"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/12/07/2023-12-10-RPC/" title="RPC协议介绍">RPC协议介绍</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-12-07T11:50:00.000Z" title="发表于 2023-12-07 19:50:00">2023-12-07</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a></span></div><div class="content">RPC，是Remote Procedure Call的缩写，意为远程过程调用，使得调用远程服务的方法，就像我们调用本地方法一样简单，并且我们不需要关心整个过程底层的细节。  
RPC协议被广泛应用于分布式系统节点间的通信，我所接触的分布式存储Curve就广泛使用了RPC协议.  
关于RPC协议的实现，有很多RPC框架可以为我们所用，比如gRPC dubbo等，因此我们一般不需要去自己实现RPC。  
RPC架构  
整个RPC架构可以看做五个部分：  

客户端，调用远程方法  
客户端 stub：把客户端调用的方法以及参数等信息传往服务端  
网络传输：在客户端stub以及服务端stub之间传递信息，可以是基于TCP也可以是基于UDP   
服务端stub：接收客户端的方法调用请求，调用方法，向客户端stub返回执行结果  
服务端：提供远程方法

一次RPC调用一次RPC调用的流程如下：  

客户端调用方法（就像调用本地方法一样）  
客户端stub将调用的方法及参数信息打包为RpcRequest并序列化  
客户端stub得到远程服务地址，将消息发送给服务端  
服务端stu ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/12/06/2023-12-06-JavaIO/" title="Java IO知识总结"><img class="post-bg" src="https://z1.ax1x.com/2023/12/01/pisYxbD.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java IO知识总结"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/12/06/2023-12-06-JavaIO/" title="Java IO知识总结">Java IO知识总结</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-12-06T11:50:00.000Z" title="发表于 2023-12-06 19:50:00">2023-12-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a></span></div><div class="content">IO也就是Input/Output ，数据拿到计算机内存中的过程即为输入，反之，数据从内存输出到外部存储（可以是远程主机、磁盘、数据库等）的过程即为输出。数据传输过程类似于水流，因此称作IO流。IO流在Java中分为输出流和输入流，根据数据的处理方式又分为字节流和字符流。（这里的输入输出是以程序为中心的，输入指程序接收输入，输出指程序把数据输出到外部存储）  
Java IO流Java IO流有四个基类，分别是输入流InputStream（字节输入流），Reader（字符输入流），OutputStream（字节输出流），Writer（字符输出流），其余的IO相关类都是派生于这四个抽象基类。  
字节流与字符流字节流：  

以字节为单位处理数据，适用于处理二进制数据  
直接操作字节，不涉及编码转换，可以处理任何类型的数据

字符流：  

以字符为单位处理数据，适合处理文本数据  
自动处理字符编码和解码（将字节传为字符）  
性能逊于字节流处理，因为还有编解码消耗  
对于不知道编码类型的数据，使用字节流处理会带来乱码问题，而使用字符流就不会出现这样的问题

字节流InputStr ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/12/04/2023-12-04-Consistent%20Hashing/" title="一致性哈希算法"><img class="post-bg" src="https://z1.ax1x.com/2023/12/01/pisYxbD.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="一致性哈希算法"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/12/04/2023-12-04-Consistent%20Hashing/" title="一致性哈希算法">一致性哈希算法</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-12-04T11:50:00.000Z" title="发表于 2023-12-04 19:50:00">2023-12-04</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98/">分布式缓存</a></span></div><div class="content">一致性哈希是一种哈希算法，主要用于分布式系统中数据的分片和负载均衡，一致性哈希算法解决了传统哈希算法在节点动态增减时可能导致数据迁移量过大的问题，能够提供更好的扩展性和性能。  
普通的哈希算法众所周知，哈希算法用于将字符串映射到固定长度的哈希值上，应用广泛，譬如Java中的HashMap，C++中的unordered_map，都是用到了哈希算法。    
在分布式缓存中，数据被缓存到了不同的节点上，那么具体到一个数据的缓存或者访问，分布式缓存系统应该如何选择节点呢？这里会遇到一个问题，即：  
如果随机选择节点，那么比如第一次查询选择将数据缓存在A节点，第二次查询的时候有很大概率会选择其他缓存节点，那么则缓存失效，需要重新进行数据查询，这显然是不合理的！  
另外，此举还会造成不同的节点缓存相同的数据，带来空间的浪费！  
我们应该让相同的数据的缓存和查找落在同一个节点上，这样才可以充分发挥缓存带来的性能提升。  
如何使得相同的数据的缓存和访问落在同一个节点上呢？  
使用哈希算法可以很好地完成这样的工作——  
现假设拥有5个节点，编号为0~4，可以首先将待查询key的信息映射到 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><a class="page-number" href="/page/3/#content-inner">3</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://ymiirtop-tc.oss-cn-beijing.aliyuncs.com/202408041627853.jpg" onerror="this.onerror=null;this.src='https://ymiirtop-tc.oss-cn-beijing.aliyuncs.com/202408082315133.gif'" alt="avatar"/></div><div class="author-info__name">月梦</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/lim-yoona"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/lim-yoona" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:ymiirtop@sina.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">月梦の技术博客，欢迎大佬来访！</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/05/02/2024-05-02-ymdb/" title="ymdb-一个分布式键值存储系统"><img src="https://s11.ax1x.com/2024/02/17/pFJnTYQ.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ymdb-一个分布式键值存储系统"/></a><div class="content"><a class="title" href="/2024/05/02/2024-05-02-ymdb/" title="ymdb-一个分布式键值存储系统">ymdb-一个分布式键值存储系统</a><time datetime="2024-05-02T11:50:00.000Z" title="发表于 2024-05-02 19:50:00">2024-05-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/28/2024-04-28-ReentrantLock/" title="Java ReentrantLock原理"><img src="https://z1.ax1x.com/2023/12/01/pisYxbD.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java ReentrantLock原理"/></a><div class="content"><a class="title" href="/2024/04/28/2024-04-28-ReentrantLock/" title="Java ReentrantLock原理">Java ReentrantLock原理</a><time datetime="2024-04-28T11:50:00.000Z" title="发表于 2024-04-28 19:50:00">2024-04-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/25/2024-03-25-Topological-Sorting/" title="拓扑排序"><img src="https://z1.ax1x.com/2023/12/01/pisYxbD.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="拓扑排序"/></a><div class="content"><a class="title" href="/2024/03/25/2024-03-25-Topological-Sorting/" title="拓扑排序">拓扑排序</a><time datetime="2024-03-25T11:50:00.000Z" title="发表于 2024-03-25 19:50:00">2024-03-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/09/2024-03-10-Spring-understanding&amp;summary/" title="Spring框架的理解与总结"><img src="https://z1.ax1x.com/2023/12/01/pisYxbD.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring框架的理解与总结"/></a><div class="content"><a class="title" href="/2024/03/09/2024-03-10-Spring-understanding&amp;summary/" title="Spring框架的理解与总结">Spring框架的理解与总结</a><time datetime="2024-03-09T11:50:00.000Z" title="发表于 2024-03-09 19:50:00">2024-03-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/02/13/2024-02-13-Raft-Algo-Summary/" title="Raft 共识算法总结"><img src="https://z1.ax1x.com/2023/12/01/pisYxbD.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Raft 共识算法总结"/></a><div class="content"><a class="title" href="/2024/02/13/2024-02-13-Raft-Algo-Summary/" title="Raft 共识算法总结">Raft 共识算法总结</a><time datetime="2024-02-13T11:50:00.000Z" title="发表于 2024-02-13 19:50:00">2024-02-13</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/"><span class="card-category-list-name">Java</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Kubernetes/"><span class="card-category-list-name">Kubernetes</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/"><span class="card-category-list-name">Linux</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Redis/"><span class="card-category-list-name">Redis</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Rust/"><span class="card-category-list-name">Rust</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/"><span class="card-category-list-name">云原生</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F/"><span class="card-category-list-name">分布式</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98/"><span class="card-category-list-name">分布式缓存</span><span class="card-category-list-count">2</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.23em; color: #999ea6">算法</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 1.1em; color: #999">操作系统</a> <a href="/tags/Rust/" style="font-size: 1.1em; color: #999">Rust</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.1em; color: #999">数据结构</a> <a href="/tags/Java/" style="font-size: 1.37em; color: #99a4b2">Java</a> <a href="/tags/SGX/" style="font-size: 1.1em; color: #999">SGX</a> <a href="/tags/%E5%AD%98%E5%82%A8/" style="font-size: 1.1em; color: #999">存储</a> <a href="/tags/Redis/" style="font-size: 1.1em; color: #999">Redis</a> <a href="/tags/Kubernetes/" style="font-size: 1.37em; color: #99a4b2">Kubernetes</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98/" style="font-size: 1.23em; color: #999ea6">分布式缓存</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 1.5em; color: #99a9bf">分布式</a> <a href="/tags/Linux/" style="font-size: 1.1em; color: #999">Linux</a> <a href="/tags/%E6%9C%BA%E5%AF%86%E8%AE%A1%E7%AE%97/" style="font-size: 1.1em; color: #999">机密计算</a> <a href="/tags/%E9%AB%98%E5%B9%B6%E5%8F%91/" style="font-size: 1.1em; color: #999">高并发</a> <a href="/tags/%E5%86%85%E5%AD%98%E5%AE%89%E5%85%A8/" style="font-size: 1.1em; color: #999">内存安全</a> <a href="/tags/%E5%BC%80%E6%BA%90/" style="font-size: 1.1em; color: #999">开源</a> <a href="/tags/%E4%BA%91%E5%8E%9F%E7%94%9F/" style="font-size: 1.37em; color: #99a4b2">云原生</a> <a href="/tags/Docker/" style="font-size: 1.1em; color: #999">Docker</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">二月 2024</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">五月 2023</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">23</div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">43k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-10-06T07:54:04.583Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 月梦</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><imgsrc="https://haiyong.site/img/icp.png"> <a href="https://beian.miit.gov.cn/#/Integrated/index"  style="color:white" target="_blank">陕ICP备2024037249号-1</a> <a href="https://beian.mps.gov.cn/#/"  style="color:white" target="_blank">京公网安备11010802044980号</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js@2.1.0/dist/typed.umd.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["醉后不知天在水","满船清梦压星河"])
  } else {
    document.getElementById("subtitle").textContent = "醉后不知天在水"
  }
}
typedJSFn.run(subtitleType)</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>